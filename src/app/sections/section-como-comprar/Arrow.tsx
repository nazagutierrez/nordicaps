import React, { useEffect, useRef } from "react";
import gsap from "gsap";

export const Arrow = ({
  className,
  type,
  delay,
  propRef,
  w,
  h,
}: {
  className: string;
  type: "circle" | "straight";
  delay: number;
  propRef?: any;
  h: number;
}) => {
  const pathRef = useRef(null);

  useEffect(() => {
    const path = pathRef.current;
    const length = path.getTotalLength();

    gsap.set(path, {
      strokeDasharray: length,
      strokeDashoffset: length,
    });

    gsap.to(path, {
      strokeDashoffset: 0,
      delay: delay,
      duration: 2,
      ease: "power2.inOut",
      scrollTrigger: {
        trigger: propRef?.current,
        start: "top 50%",
        once: true,
        markers: true,
      },
    });
  }, []);

  return (
    <>
      {type === "straight" ? (
        <svg
          height={h}
          viewBox="0 0 236 66"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={`text-[#c6e7cb91] ${className}`}
        >
          <path
            d="M23.9244 0.127533C18.3186 0.573079 9.85122 2.47255 4.6676 4.44233C1.59496 5.61482 0 7.46734 0 9.81232C0 11.2897 0.422197 12.298 1.43077 13.2594C2.39244 14.174 3.02573 14.4085 5.74654 14.9713C10.4611 15.9327 20.4765 20.4351 27.5365 24.7968C31.5708 27.2825 32.8374 27.8218 32.8374 27.0479C32.8374 26.6727 31.0313 24.5154 27.513 20.6931C26.3168 19.3799 25.3317 18.2308 25.3317 18.1605C25.3317 17.9963 26.7625 18.0901 34.362 18.7467C54.9088 20.5055 75.5964 24.7733 95.463 31.3861C103.156 33.9422 107.894 35.7244 116.221 39.1949C123.633 42.2669 125.322 42.8766 126.846 42.8766C127.925 42.8766 128.183 42.7828 128.957 42.0793C129.731 41.3523 129.825 41.1413 129.802 40.2033C129.778 39.0777 129.848 39.1949 127.034 35.7244C125.298 33.5904 124.078 31.4096 124.078 30.4247C124.078 29.4398 124.829 29.0412 126.893 29.0412C131.584 29.0412 140.802 32.5587 157.338 40.6723C166.72 45.2685 169.605 46.5816 170.708 46.7692C172.514 47.0506 173.944 46.1361 174.367 44.4477C174.46 44.049 174.226 42.0089 173.804 39.4294C173.053 34.974 173.03 33.8249 173.71 32.5117C174.179 31.6207 174.718 31.3861 176.313 31.3861C180.911 31.3861 190.762 36.0761 205.562 45.2919C214.85 51.0605 219.541 54.3435 227.845 60.886C230.542 63.0199 233.052 64.9194 233.427 65.107C234.318 65.5291 235.35 65.1539 235.726 64.2159C236.218 63.0434 235.515 62.1523 231.175 58.2596C224.537 52.3034 220.104 48.8328 212.974 44.0022C198.854 34.4112 187.22 28.1266 180.488 26.4617C171.599 24.234 166.908 28.9943 168.855 38.1632C169.136 39.4998 169.347 40.6019 169.3 40.6488C169.253 40.6957 167.424 39.7343 165.242 38.5149C159.59 35.3492 148.777 30.0261 144.367 28.2204C137.542 25.383 133.39 24.1167 129.567 23.6477C124.782 23.0615 120.889 24.703 119.716 27.7749C119.223 29.0881 119.364 31.5503 120.044 33.098C120.302 33.7077 120.49 34.2001 120.443 34.2001C120.396 34.2001 118.262 33.1683 115.681 31.902C90.4436 19.4267 60.1159 11.8525 28.9907 10.2579C22.7516 9.9296 22.9158 10.0468 26.6452 8.63983C29.366 7.63148 30.7264 6.0838 30.7264 4.06711C30.703 3.26982 29.882 1.72214 29.1315 1.089C28.4043 0.479303 26.5279 -0.0835156 25.4959 0.0102836C25.2144 0.0337334 24.5108 0.080633 23.9244 0.127533Z"
            stroke="currentColor"
            strokeWidth="2"
            fill="none"
            ref={pathRef}
          />
        </svg>
      ) : (
        <svg
          height={h}
          viewBox="0 0 144 61"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className={`text-[#c6e7cb91] ${className}`}
        >
          <path
            stroke="currentColor"
            strokeWidth="2"
            d="M68.9434 0.229236C58.3864 1.33176 45.4598 5.76533 36.6623 11.2545C33.1902 13.4126 29.155 16.3449 25.5421 19.3241C21.6478 22.5378 13.859 30.279 11.3487 33.4458C6.60979 39.3807 2.62156 46.6527 0.627451 52.9394C-0.146734 55.426 -0.217114 58.4286 0.486691 59.9533C1.21396 61.5719 1.6597 61.2904 1.6597 59.2496C1.6597 56.7865 2.3635 54.6049 4.56876 50.0541C6.96169 45.1279 8.55699 42.4771 11.513 38.5596C17.6361 30.4432 28.9673 20.5204 38.8441 14.6794C45.7413 10.5742 54.5389 7.47778 63.9464 5.81226C67.5124 5.17889 75.7938 4.94431 80.1809 5.3431C85.3421 5.81226 91.9579 7.40741 96.7672 9.28405C101.623 11.1842 107.559 14.4448 112.04 17.6586C114.925 19.6994 121.518 24.8836 121.541 25.0947C121.541 25.1651 120.087 25.6108 118.304 26.08C114.198 27.1356 112.626 27.7455 111.406 28.6604C110.139 29.6456 109.6 30.3963 109.436 31.4519C109.295 32.2025 109.389 32.4136 109.975 33.0236C111.125 34.173 111.993 34.173 120.814 33.0236C128.368 32.0618 128.978 32.0148 135.054 32.0148L141.412 31.9914L142.256 31.3346C143.383 30.4901 143.828 29.5752 143.828 28.2147C143.828 26.643 143.078 25.4701 141.154 24.0861C140.262 23.4292 138.667 22.139 137.635 21.2007C133.365 17.424 129.048 13.9287 127.289 12.8497C123.207 10.3162 120.204 10.1989 118.139 12.5212L117.436 13.3188L114.503 11.4422C105.119 5.48384 94.8904 1.7071 84.3802 0.323074C81.4008 -0.0522541 72.2279 -0.122634 68.9434 0.229236Z"
            fill="none"
            ref={pathRef}
          />
        </svg>
      )}
    </>
  );
};
